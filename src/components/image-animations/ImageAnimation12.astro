---
/*
INFORMATIONS
set: 
- image as imagemetadata
- alt as string
- width and/or height as numbers
set optionally:
- class as string
- duration as string 'value and s | ms' 
- format as string
- positionY as string (y value, default center)
*/
import { Image } from 'astro:assets';
import { getImage } from 'astro:assets';

interface Props {
  class?: string;
  duration?: string;
  image: ImageMetadata;
  alt: string;
  width?: number;
  height?: number;
  format?: string;
  positionY?: string;
}
// prettier-ignore
const { class:className, duration='.5s', image, alt, width, height, format = 'webp', positionY='center', ...attrs } = Astro.props;

const optImg = await getImage({ src: image, width, height, format });
---

<!-- prettier-ignore -->
<div>
  <Image src={image} alt={alt} width={width} height={height} format={format} {...attrs}>
  <Image src={image} alt={alt} width={width} height={height} format={format} {...attrs}>
  <slot />
</div>

<style define:vars={{ duration, positionY }}>
  div {
    position: relative;
    width: 100%;
    height: 100%;

    img {
      position: absolute;
      inset: 0;
      width: 100%;
      height: 100%;
      &:nth-of-type(1){
        clip-path: polygon(0 0,50% 0, 50% 100%, 0 100%);
      }

      /* &::before,
      &::after {
        position: absolute;
        top: 0;
        transition: var(--duration);
        background-image: var(--url);
        background-size: cover;
        background-position-y: var(--positionY);
        width: 50%;
        height: 100%;
        content: '';
      }*/
      &:nth-of-type(1) {
        left: 0;
        transform-origin: bottom;
        /* background-position-x: left; */
      }
      &:nth-of-type(2) {
        right: 0;
        transform-origin: top;
        /* background-position-x: right; */
      } 
    }

    &:hover {
      img {
        &:nth-of-type(1) {
          transform: rotateX(90deg) translateY(50%);
        }
        &:nth-of-type(2) {
          transform: rotateX(90deg) translateY(-50%);
        }
      }
      a {
        z-index: 1;
      }
    }
  }
</style>

<script>

</script>