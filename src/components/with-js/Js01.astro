---
/*INFORMATIONS:
set optionally
- class as string
- duration as string
- text as string
- color as string ('<color>')
- startHue as number
*/

interface Props {
  class?: string;
  duration?: string;
  text?: string;
  startHue?: number;
}
const {
  class: classList,
  duration = '.25s',
  text = 'JAVASCRIPT 01',
  startHue = 143,
  ...attrs
} = Astro.props;
let letters = text.split('');
const lenghtWithoutSpaces = letters.filter((letter) => letter !== ' ').length;
const hueDeg = Math.ceil(360 / lenghtWithoutSpaces);
let spanIndex = 0;
const style = `--duration: ${duration};`;
---

<h3 class={classList} style={style} {...attrs}>
  {
    letters.map((letter, idx) => {
      if (letter === ' ') return letter;
      return (
        <span
          style={`--delay: ${40 * idx}ms;--hoverColor: oklch(.867 .287 ${(143 + hueDeg * spanIndex++) % 360});`}
        >
          {letter}
        </span>
      );
    })
  }
</h3>

<style>
  h3 {
    background: #222;
    width: fit-content;
    color: #666;
    font-size: 1.7rem;
    line-height: 1;
    text-align: center;
    span {
      display: inline-block;
      transition: var(--duration);
      transition-delay: var(--delay);
    }

    &:hover span {
      color: var(--hoverColor);
      text-shadow:
        0 0 0.1em var(--hoverColor),
        0 0 0.3em var(--hoverColor),
        0 0 0.6em var(--hoverColor);
    }
  }
</style>
