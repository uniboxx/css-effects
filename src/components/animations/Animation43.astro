---
interface Props {
  class?: string;
  duration?: string;
  text: string;
  colors?: string;
}
const {
  class: className,
  text,
  duration = '.5s',
  colors = '#03e9f4, #051130',
} = Astro.props;
const [color, reflect] = colors.split(',');
const regex = /(?<quantity>[\d\.]+)(?<unit>[a-z]+)/;
const result = duration.match(regex)!;
const quantity = +result.groups?.quantity!;
const unit = result.groups?.unit!;
---

<a class={className}>
  {
    Array.from({ length: 4 }).map((_, idx) => {
      const delay = `${(quantity / 2) * idx}${unit}`;
      return <div class="border" style={`animation-delay: ${delay}`} />;
    })
  }
  {text}
</a>

<style define:vars={{ duration, color, reflect }}>
  a {
    position: relative;
    transition: var(--duration);
    padding: 10px 20px;
    color: var(--color);
    -webkit-box-reflect: below 1px linear-gradient(transparent, #0005);
    overflow: hidden;
    .border {
      position: absolute;

      &:nth-of-type(1) {
        top: 0;
        left: -100%;
        animation: anim43_1 calc(var(--duration) * 2) linear infinite;
        background: linear-gradient(to right, transparent, var(--color));
        width: 100%;
        height: 2px;
      }
      &:nth-of-type(2) {
        top: -100%;
        right: 0;
        animation: anim43_2 calc(var(--duration) * 2) linear infinite;
        background: linear-gradient(to bottom, transparent, var(--color));
        width: 2px;
        height: 100%;
      }
      &:nth-of-type(3) {
        right: -100%;
        bottom: 0;
        animation: anim43_3 calc(var(--duration) * 2) linear infinite;
        background: linear-gradient(to left, transparent, var(--color));
        width: 100%;
        height: 2px;
      }
      &:nth-of-type(4) {
        bottom: -100%;
        left: 0;
        animation: anim43_4 calc(var(--duration) * 2) linear infinite;
        background: linear-gradient(to top, transparent, var(--color));
        width: 2px;
        height: 100%;
      }
    }

    &:hover {
      box-shadow:
        0 0 0.2em var(--color),
        0 0 1em var(--color),
        0 0 2em var(--color),
        0 0 8em var(--color);
      background-color: var(--color);
      color: var(--reflect);
    }
  }

  @keyframes anim43_1 {
    0% {
      left: -100%;
    }
    50%,
    100% {
      left: 100%;
    }
  }
  @keyframes anim43_2 {
    0% {
      top: -100%;
    }
    50%,
    100% {
      top: 100%;
    }
  }
  @keyframes anim43_3 {
    0% {
      right: -100%;
    }
    50%,
    100% {
      right: 100%;
    }
  }
  @keyframes anim43_4 {
    0% {
      bottom: -100%;
    }
    50%,
    100% {
      bottom: 100%;
    }
  }
</style>
