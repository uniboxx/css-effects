---
/*
INFORMATIONS
set optionally:
- class as string
- duration as string 'value and s | ms'
- text as string
Set the size setting the font-size
*/

import fingerprint from '@/images/animation46/fingerprint.svg';
import scanned from '@/images/animation46/fingerprint_scanned.svg';
import { getImage } from 'astro:assets';
const optFingerprint = await getImage({
  src: fingerprint,
});
const optScanned = await getImage({
  src: scanned,
});

interface Props {
  class?: string;
  duration?: string;
  text?: string;
}
const {
  class: classList,
  duration = '4s',
  text = 'scanning...',
  ...attrs
} = Astro.props;
const style = `--duration: ${duration};`;
---

<div class:list={['container46', classList]} style={style} {...attrs}>
  <div class="content">
    <div
      class="fingerprint"
      style={`--url: url(${optFingerprint.src});--scannedUrl: url(${optScanned.src})`}
    >
    </div>
    <span>{text}</span>
  </div>
</div>

<style>
  .container46 {
    --color: #3fefef;
    --size: 6em;
    background: #001d30;
    padding: 0.5em;
    width: fit-content;
    font-size: 1.5rem;
    .content {
      display: flex;
      position: relative;
      flex-direction: column;
      justify-content: space-around;
      align-items: center;
      transition: var(--duration);
      width: var(--size);
      height: var(--size);
      color: #fff;
      .fingerprint {
        position: relative;
        background: var(--url);
        background-size: contain;
        width: calc(var(--size) * 0.75);
        height: calc(var(--size) * 0.75);
        &::before,
        &::after {
          position: absolute;
          inset: 0;
          content: '';
        }
        &::before {
          animation: scanning46 var(--duration) ease-in-out infinite;
          background: var(--scannedUrl);
          background-size: cover;
          height: 100%;
          overflow: hidden;
        }
        &::after {
          filter: drop-shadow(0 0 calc(var(--size) * 0.05) var(--color))
            drop-shadow(0 0 calc(var(--size) * 0.15) var(--color));
          animation: animLine46 var(--duration) ease-in-out infinite;
          border-radius: calc(var(--size) * 0.02);
          background-color: var(--color);
          height: calc(var(--size) * 0.02);
        }
      }
      span {
        filter: drop-shadow(0 0 calc(var(--size) * 0.05) var(--color));
        animation: animText46 calc(var(--duration) / 8) ease-in-out infinite;
        color: var(--color);
      }
    }
  }
  @keyframes scanning46 {
    0%,
    100% {
      height: 0%;
    }
    50% {
      height: 100%;
    }
  }
  @keyframes animLine46 {
    0%,
    100% {
      top: 0;
    }
    50% {
      top: 100%;
    }
  }
  @keyframes animText46 {
    from {
      opacity: 1;
    }
    to {
      opacity: 0;
    }
  }
</style>
