---
import { Icon } from 'astro-icon/components';

interface Props {
  iconName: string;
  class?: string;
  duration?: string;
  color: string;
  hoverColor: string;
}

const {
  class: className,
  iconName,
  duration = '.5s',
  color,
  hoverColor,
} = Astro.props;
---

<div class="container">
  <Icon name={`mdi:${iconName}`} class:list={[className, 'icon']} />
  <span></span><span></span>
</div>

<style define:vars={{ duration, color, hoverColor }}>
  .container {
    display: flex;
    position: relative;
    justify-content: center;
    align-items: center;
    border: 2px solid var(--color);
    border-radius: 50%;
    padding: 1em;

    .icon {
      position: relative;
      z-index: 10;
      transition: var(--duration);
      color: var(--color);
    }

    span {
      position: absolute;
      top: 0;
      left: 0;
      border-radius: 50%;
      width: 100%;
      height: 100%;
      content: '';
      &:nth-of-type(1) {
        opacity: 0;
        z-index: 5;
        transition: var(--duration);
        background-color: var(--color);
      }
      &:nth-of-type(2) {
        opacity: 0;
        transition: var(--duration) linear infinite;
        border: 0.05em dashed var(--color);
      }
    }
    &:hover {
      .icon {
        color: var(--hoverColor);
      }
      span {
        &:nth-of-type(1) {
          transform: scale(0.8);
          opacity: 1;
        }
        &:nth-of-type(2) {
          opacity: 1;
          animation: rotating13 10s linear infinite;
        }
      }
    }
  }
  @keyframes rotating13 {
    from {
      transform: scale(0.9) rotate(0deg);
    }
    to {
      transform: scale(0.9) rotate(360deg);
    }
  }
</style>
