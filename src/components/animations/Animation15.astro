---
// use the image in the below url
import wave from '@/images/wave.png';
import { getImage } from 'astro:assets';

interface Props {
  class?: string;
  duration?: string;
  color?: string;
}
const {
  class: classList,
  duration = '1.5s',
  color = '#00aeff',
  ...attrs
} = Astro.props;
const optWave = await getImage({ src: wave, format: 'webp' });
let { width, height } = optWave.attributes;
width += 'px';
height += 'px';
---

<a class={classList} {...attrs}
  >Animation 15
  <div class="wave" style={`--url: url(${optWave.src})`}></div>
</a>

<style define:vars={{ color, duration, width, height }}>
  a {
    position: relative;
    z-index: 0;
    transition: var(--duration);
    border: 0.125em solid var(--color);
    padding: 0.5em 1em;
    overflow: hidden;
    color: var(--color);
    .wave {
      position: absolute;
      top: calc(100% + var(--height));
      left: 0;
      z-index: -1;
      transition: var(--duration);
      background-color: var(--color);
      width: 100%;
      height: 100%;

      &::before {
        position: absolute;
        top: calc(var(--height) * -1);
        left: 0;
        background: var(--url);
        background-position-x: calc(var(--width) * -1);
        width: 100%;
        height: var(--height);
        content: '';
      }
    }
    &:hover {
      color: white;
      .wave {
        top: 0;
        &::before {
          animation: wavy15 var(--duration) linear infinite;
        }
      }
    }
  }
  @keyframes wavy15 {
    from {
      background-position-x: calc(var(--width) * -1);
    }
    to {
      background-position-x: left;
    }
  }
</style>
